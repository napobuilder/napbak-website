<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ===== METAETIQUETAS (Privado) ===== -->
    <title>Portal de Cliente | Bean Films</title>
    <meta name="robots" content="noindex, nofollow"> <!-- Evita que los motores de búsqueda indexen esta página -->

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome (iconos) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0c0a09; color: #e2e8f0; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Montserrat', sans-serif; }
        .header-scrolled { background-color: rgba(12, 10, 9, 0.8); backdrop-filter: blur(10px); box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); }
        .form-input {
            background-color: #1f2937;
            border: 1px solid #374151;
            color: #e2e8f0;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-input:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.4);
        }
        .file-input-label {
            background-color: #374151;
            color: #e2e8f0;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-block;
        }
        .file-input-label:hover {
            background-color: #4b5563;
        }
        .file-input-label .icon {
            margin-right: 0.5rem;
        }
        .form-checkbox {
            accent-color: #8b5cf6;
        }
        /* Estilos para el mensaje de estado */
        #form-status {
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-stone-950">

    <!-- ===== Header ===== -->
    <header id="header" class="fixed top-0 left-0 w-full z-50 transition-all duration-300 header-scrolled">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="logo">
                <a href="#" class="text-2xl font-black tracking-tighter text-white">napbak</a>
            </div>
            <nav class="hidden md:flex items-center space-x-8">
                <span class="text-purple-400 font-semibold">Portal de Cliente: Bean Films</span>
            </nav>
            <div class="md:hidden">
                 <span class="text-purple-400 font-semibold">Bean Films</span>
            </div>
        </div>
    </header>

    <main class="pt-32 pb-20">
        <!-- ===== Sección de Formulario para Cliente ===== -->
        <section id="client-form" class="py-16">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h1 class="text-4xl md:text-5xl font-black text-white mb-4">Envío de Proyecto</h1>
                    <p class="text-lg text-slate-400 max-w-2xl mx-auto">Hola, Bean Films. Utiliza este formulario para enviarme los detalles de tu nuevo video.</p>
                </div>
                
                <div class="max-w-2xl mx-auto bg-gray-800/30 backdrop-blur-sm border border-white/10 rounded-2xl p-8">
                    <!-- El formulario ya no necesita 'action' o 'method' aquí, lo manejaremos con JS -->
                    <form id="project-form" class="space-y-6">
                        
                        <!-- Campo: Nombre del Cliente (Dropdown) -->
                        <div>
                            <label for="client-name" class="block text-slate-300 mb-2 font-semibold">Nombre del Cliente Final</label>
                            <select id="client-name" name="client-name" required class="w-full form-input">
                                <option value="" disabled selected>Selecciona un cliente</option>
                                <option value="Ready Windows">Ready Windows</option>
                                <option value="Great Wall">Great Wall</option>
                                <option value="Mac Mel Installers">Mac Mel Installers</option>
                                <option value="Bean Films">Bean Films (Proyecto Interno)</option>
                                <option value="Cliente Nuevo">Cliente Nuevo</option>
                            </select>
                        </div>

                        <!-- Campo: Número de Video -->
                        <div>
                            <label for="video-number" class="block text-slate-300 mb-2 font-semibold">Número de Video</label>
                            <input type="number" id="video-number" name="video-number" required class="w-full form-input" placeholder="Ej: 001, 002, etc.">
                        </div>

                        <!-- Campo: Subir Video o Pegar Link -->
                        <div>
                            <label class="block text-slate-300 mb-2 font-semibold">Archivo de Video</label>
                            <p class="text-sm text-slate-400 mb-3">Sube un archivo MP4 o pega un enlace de Google Drive, Dropbox, etc.</p>
                            
                            <label for="video-file" class="file-input-label">
                                <i class="fas fa-upload icon"></i>
                                <span>Seleccionar archivo MP4</span>
                            </label>
                            <input type="file" id="video-file" name="video-upload" class="hidden" accept=".mp4">
                            <p id="file-name" class="text-slate-400 mt-2 text-sm"></p>
                            
                            <div class="relative flex items-center my-4">
                                <div class="flex-grow border-t border-gray-600"></div>
                                <span class="flex-shrink mx-4 text-gray-400 text-sm">O</span>
                                <div class="flex-grow border-t border-gray-600"></div>
                            </div>

                            <input type="url" id="video-link" name="video-link" class="w-full form-input" placeholder="https://ejemplo.com/mi-video">
                        </div>

                        <!-- Campo: Mood de la Música -->
                        <div>
                            <label class="block text-slate-300 mb-2 font-semibold">Mood de la Música</label>
                            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-4">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" name="music-mood[]" value="Rock" class="form-checkbox h-5 w-5 rounded">
                                    <span class="text-slate-300">Rock</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" name="music-mood[]" value="Metal" class="form-checkbox h-5 w-5 rounded">
                                    <span class="text-slate-300">Metal</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" name="music-mood[]" value="Electrónica" class="form-checkbox h-5 w-5 rounded">
                                    <span class="text-slate-300">Electrónica</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" name="music-mood[]" value="Funky" class="form-checkbox h-5 w-5 rounded">
                                    <span class="text-slate-300">Funky</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" name="music-mood[]" value="Inspiracional" class="form-checkbox h-5 w-5 rounded">
                                    <span class="text-slate-300">Inspiracional</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" name="music-mood[]" value="Orquestal" class="form-checkbox h-5 w-5 rounded">
                                    <span class="text-slate-300">Orquestal</span>
                                </label>
                            </div>
                            <textarea name="custom-music-mood" rows="3" class="w-full form-input" placeholder="Otro estilo o descripción más detallada (opcional)"></textarea>
                        </div>

                        <!-- Campo: Diálogo / Texto en Pantalla -->
                        <div>
                            <label for="dialogue" class="block text-slate-300 mb-2 font-semibold">Diálogo o Texto del Video</label>
                            <textarea id="dialogue" name="dialogue" rows="5" class="w-full form-input" placeholder="Escribe o copia y pega aqui solo el texto que va a hablar el locutor IA"></textarea>
                        </div>

                        <!-- Campo: Detalles Adicionales -->
                        <div>
                            <label for="additional-details" class="block text-slate-300 mb-2 font-semibold">Detalles Adicionales o Especificaciones</label>
                            <textarea id="additional-details" name="additional-details" rows="5" class="w-full form-input" placeholder="¿Alguna otra especificación? Por ejemplo: 'La música debe empezar suave y crecer en intensidad', 'Evitar sonidos de guitarra eléctrica', 'Sincronizar el beat drop con el segundo 32 del video', etc."></textarea>
                        </div>

                        <!-- Botón de Envío -->
                        <div class="text-center pt-4">
                            <button id="submit-button" type="submit" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-10 rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg shadow-purple-500/50">
                                Enviar Proyecto
                            </button>
                        </div>
                    </form>
                    <!-- Elemento para mostrar el estado del envío -->
                    <div id="form-status" class="text-center mt-6 text-lg opacity-0"></div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- ===== Footer ===== -->
    <footer id="contact" class="bg-gradient-to-t from-purple-950/50 to-gray-900 pt-20">
        <div class="container mx-auto px-6">
            <div class="border-t border-white/10 py-6 text-center text-slate-500">
                <p>&copy; 2024 napbak. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const fileInput = document.getElementById('video-file');
            const fileNameDisplay = document.getElementById('file-name');

            if (fileInput) {
                fileInput.addEventListener('change', () => {
                    if (fileInput.files.length > 0) {
                        fileNameDisplay.textContent = `Archivo seleccionado: ${fileInput.files[0].name}`;
                    } else {
                        fileNameDisplay.textContent = '';
                    }
                });
            }
            
            // Lógica para el header
            const header = document.getElementById('header');
            window.addEventListener('scroll', () => {
                header.classList.toggle('header-scrolled', window.scrollY > 50);
            });

            // --- LÓGICA DE ENVÍO DEL FORMULARIO A N8N ---
            const form = document.getElementById('project-form');
            const statusMessage = document.getElementById('form-status');
            const submitButton = document.getElementById('submit-button');

            form.addEventListener('submit', async (e) => {
                // Prevenimos el envío tradicional del formulario
                e.preventDefault();

                // **URL del Webhook de n8n**
                const n8nWebhookUrl = 'https://napbak.app.n8n.cloud/webhook-test/2003d919-e33f-454a-94c0-7857f010445d';

                // Mostramos un mensaje de "Enviando..."
                submitButton.disabled = true;
                submitButton.textContent = 'Enviando...';
                statusMessage.textContent = 'Procesando y subiendo el proyecto...';
                statusMessage.className = 'text-center mt-6 text-lg opacity-100 text-yellow-400';

                // Creamos un objeto FormData para recopilar todos los datos, incluyendo el archivo
                const formData = new FormData(form);

                try {
                    // Usamos fetch para enviar los datos al webhook de n8n
                    // Se agrega mode: 'no-cors' para evitar el error de CORS.
                    // Esto significa que no podemos leer la respuesta del servidor,
                    // pero permite que la solicitud se envíe.
                    await fetch(n8nWebhookUrl, {
                        method: 'POST',
                        body: formData,
                        mode: 'no-cors' // FIX: Evita el error de CORS
                    });

                    // Como no podemos verificar la respuesta con 'no-cors', asumimos éxito si no hay un error de red.
                    statusMessage.textContent = '¡Proyecto enviado con éxito!';
                    statusMessage.className = 'text-center mt-6 text-lg opacity-100 text-green-400';
                    form.reset(); // Limpiamos el formulario
                    fileNameDisplay.textContent = ''; // Limpiamos el nombre del archivo

                } catch (error) {
                    // Este bloque atrapará errores de red fundamentales (ej. sin conexión a internet)
                    console.error('Error al enviar el formulario:', error);
                    statusMessage.textContent = 'Hubo un error al enviar el proyecto. Inténtalo de nuevo.';
                    statusMessage.className = 'text-center mt-6 text-lg opacity-100 text-red-400';
                } finally {
                    // Reactivamos el botón de envío
                    submitButton.disabled = false;
                    submitButton.textContent = 'Enviar Proyecto';
                }
            });
        });
    </script>
</body>
</html>
